/*! kist-segment 0.0.0 - Simple UI view setup. | Author: Ivan NikoliÄ‡, 2014 | License: MIT */
!function(a,b,c){function d(b,c){return b="string"==typeof b?this.prototype[b]:b||{},a.extend({},b,c)}function e(b){function c(){c._super.constructor.apply(this,arguments)}function d(){}var e=this;return d.prototype=e.prototype,c.prototype=new d,a.extend(c.prototype,b,{constructor:c}),a.extend(c,n,{_super:e.prototype}),c}function f(b,c){var d={};for(var e in b)b.hasOwnProperty(e)&&-1!==a.inArray(e,c)&&(d[e]=b[e]);return d}function g(b,c){var d={};for(var e in b)if(b.hasOwnProperty(e)){if(-1!==a.inArray(e,c))continue;d[e]=b[e]}return d}function h(b){b=b||{},this.uid=j++,this.ens=i.ns.event+"."+this.uid,a.extend(this,f(b,m)),this._ensureElement(),this.init.apply(this,arguments)}var i={name:"segment",ns:{event:".kist.segment"}},j=0,k=/^(\S+)\s*(.*)$/,l=/([^\|\s]+)/g,m=["el","events","childrenEl"],n={extend:e,supply:d};a.extend(h,n),a.extend(h.prototype,{$html:a("html"),$body:a("body"),$doc:a(c),$win:a(b),_ensureElement:function(){this.el&&this.setElement(this.el)},_setElement:function(b){this.$el=a("function"==typeof b?b.call(this):b),this.el=this.$el[0]},_removeElement:function(){this.$el.remove()},events:{},childrenEl:{},$:function(a){return this.$el.find(a)},init:function(){},render:function(){return this},remove:function(){this._removeElement()},setOptions:function(b){this.options=a.extend({},this.options,g(b,m))},setElement:function(a){this.undelegateEvents(),this._setElement(a),this.delegateEvents(),this.cacheChildrenEl()},cacheChildrenEl:function(b){b=b||this.childrenEl,a.each(b,a.proxy(function(a,b){return(b=this.$("function"==typeof b?b.call(this):b))?void(this["$"+a]=b):!0},this))},delegateEvents:function(b){b=b||this.events;var c;this.undelegateEvents(),a.each(b,a.proxy(function(b,d){if("function"!=typeof d&&(d=this[d]),!d)return!0;c=b.match(k),eventMatch=c[1].match(l);for(var e=0,f=eventMatch.length;f>e;e++)this.delegate(eventMatch[e],c[2],a.proxy(d,this))},this))},undelegateEvents:function(){this.$el&&this.$el.off(this.ens)},delegate:function(a,b,c){this.$el.on(a+this.ens,b,c)},undelegate:function(a,b,c){this.$el.off(a+this.ens,b,c)}}),a.kist=a.kist||{},a.kist[i.name]=h}(jQuery,window,document);